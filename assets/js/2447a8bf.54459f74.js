"use strict";(self.webpackChunknimbly=self.webpackChunknimbly||[]).push([[1670],{3905:function(e,r,n){n.d(r,{Zo:function(){return d},kt:function(){return v}});var t=n(7294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function s(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=t.createContext({}),c=function(e){var r=t.useContext(l),n=r;return e&&(n="function"==typeof e?e(r):a(a({},r),e)),n},d=function(e){var r=c(e.components);return t.createElement(l.Provider,{value:r},e.children)},u={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},p=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),v=o,g=p["".concat(l,".").concat(v)]||p[v]||u[v]||i;return n?t.createElement(g,a(a({ref:r},d),{},{components:n})):t.createElement(g,a({ref:r},d))}));function v(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=p;var s={};for(var l in r)hasOwnProperty.call(r,l)&&(s[l]=r[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return t.createElement.apply(null,a)}return t.createElement.apply(null,n)}p.displayName="MDXCreateElement"},9319:function(e,r,n){n.r(r),n.d(r,{contentTitle:function(){return l},default:function(){return p},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var t=n(7462),o=n(3366),i=(n(7294),n(3905)),a=["components"],s={title:"Application structure",sidebar_position:9,slug:"/server-application-structure/"},l=void 0,c={unversionedId:"categories/Server/server-structure",id:"categories/Server/server-structure",title:"Application structure",description:"Registering event handlers",source:"@site/docs/categories/02-Server/server-structure.md",sourceDirName:"categories/02-Server",slug:"/server-application-structure/",permalink:"/docs/v1/server-application-structure/",tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"Application structure",sidebar_position:9,slug:"/server-application-structure/"},sidebar:"sidebar",previous:{title:"Handling CORS",permalink:"/docs/v1/handling-cors/"},next:{title:"Usage with bundlers",permalink:"/docs/v1/server-with-bundlers/"}},d=[{value:"Registering event handlers",id:"registering-event-handlers",children:[{value:"Each file registers its own event handlers",id:"each-file-registers-its-own-event-handlers",children:[],level:3},{value:"All event handlers are registered in the <code>index.js</code> file",id:"all-event-handlers-are-registered-in-the-indexjs-file",children:[],level:3}],level:2}],u={toc:d};function p(e){var r=e.components,n=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,t.Z)({},u,n,{components:r,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"registering-event-handlers"},"Registering event handlers"),(0,i.kt)("p",null,"You will find below two suggestions on how to register your event handlers."),(0,i.kt)("p",null,"Please note that these are merely suggestions and not strict guidelines that you must follow. Please adapt it to your own liking!"),(0,i.kt)("h3",{id:"each-file-registers-its-own-event-handlers"},"Each file registers its own event handlers"),(0,i.kt)("p",null,"Here, the entrypoint is kept tidy, but the event listeners may be less discoverable (though strong naming convention/ctrl+f will help)."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"index.js")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const httpServer = require("http").createServer();\nconst io = require("socket.io")(httpServer);\n\nconst registerOrderHandlers = require("./orderHandler");\nconst registerUserHandlers = require("./userHandler");\n\nconst onConnection = (socket) => {\n  registerOrderHandlers(io, socket);\n  registerUserHandlers(io, socket);\n}\n\nio.on("connection", onConnection);\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"orderHandler.js")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'module.exports = (io, socket) => {\n  const createOrder = (payload) => {\n    // ...\n  }\n\n  const readOrder = (orderId, callback) => {\n    // ...\n  }\n\n  socket.on("order:create", createOrder);\n  socket.on("order:read", readOrder);\n}\n')),(0,i.kt)("h3",{id:"all-event-handlers-are-registered-in-the-indexjs-file"},"All event handlers are registered in the ",(0,i.kt)("inlineCode",{parentName:"h3"},"index.js")," file"),(0,i.kt)("p",null,"Here, each event name is located in the same place, which is great for discoverability, but could get out of hand in a medium/big application."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"index.js")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const httpServer = require("http").createServer();\nconst io = require("socket.io")(httpServer);\n\nconst { createOrder, readOrder } = require("./orderHandler")(io);\nconst { updatePassword } = require("./userHandler")(io);\n\nconst onConnection = (socket) => {\n  socket.on("order:create", createOrder);\n  socket.on("order:read", readOrder);\n\n  socket.on("user:update-password", updatePassword);\n}\n\nio.on("connection", onConnection);\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"orderHandler.js")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = (io) => {\n  const createOrder = function (payload) {\n    const socket = this; // hence the 'function' above, as an arrow function will not work\n    // ...\n  };\n\n  const readOrder = function (orderId, callback) {\n    // ...\n  };\n\n  return {\n    createOrder,\n    readOrder\n  }\n}\n")))}p.isMDXComponent=!0}}]);